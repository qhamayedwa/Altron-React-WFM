generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "debian-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model categories {
  id          Int       @id @default(autoincrement())
  name        String    @unique @db.VarChar(80)
  description String?
  created_at  DateTime? @db.Timestamp(6)
}

model companies {
  id                  Int       @id @default(autoincrement())
  name                String    @db.VarChar(100)
  code                String    @unique @db.VarChar(10)
  legal_name          String?   @db.VarChar(150)
  registration_number String?   @db.VarChar(50)
  tax_number          String?   @db.VarChar(50)
  email               String?   @db.VarChar(120)
  phone               String?   @db.VarChar(20)
  website             String?   @db.VarChar(100)
  address_line1       String?   @db.VarChar(100)
  address_line2       String?   @db.VarChar(100)
  city                String?   @db.VarChar(50)
  state_province      String?   @db.VarChar(50)
  postal_code         String?   @db.VarChar(20)
  country             String?   @db.VarChar(50)
  timezone            String?   @db.VarChar(50)
  currency            String?   @db.VarChar(3)
  fiscal_year_start   Int?
  is_active           Boolean?
  created_at          DateTime? @db.Timestamp(6)
  updated_at          DateTime? @db.Timestamp(6)
  regions             regions[]
}

model dashboard_configs {
  id          Int       @id @default(autoincrement())
  config_name String?   @db.VarChar(100)
  config_data String
  created_by  Int
  is_active   Boolean?
  created_at  DateTime? @db.Timestamp(6)
  updated_at  DateTime? @db.Timestamp(6)
  users       users     @relation(fields: [created_by], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model departments {
  id                                         Int       @id @default(autoincrement())
  site_id                                    Int
  name                                       String    @db.VarChar(100)
  code                                       String    @db.VarChar(10)
  description                                String?
  cost_center                                String?   @db.VarChar(20)
  budget_code                                String?   @db.VarChar(20)
  manager_id                                 Int?
  deputy_manager_id                          Int?
  email                                      String?   @db.VarChar(120)
  phone                                      String?   @db.VarChar(20)
  extension                                  String?   @db.VarChar(10)
  standard_hours_per_day                     Float?
  standard_hours_per_week                    Float?
  is_active                                  Boolean?
  created_at                                 DateTime? @db.Timestamp(6)
  updated_at                                 DateTime? @db.Timestamp(6)
  users_departments_deputy_manager_idTousers users?    @relation("departments_deputy_manager_idTousers", fields: [deputy_manager_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users_departments_manager_idTousers        users?    @relation("departments_manager_idTousers", fields: [manager_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  sites                                      sites     @relation(fields: [site_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  jobs                                       jobs[]
  users_users_department_idTodepartments     users[]   @relation("users_department_idTodepartments")

  @@unique([site_id, code], map: "uq_site_department_code")
}

model jobs {
  id                        Int          @id @default(autoincrement())
  title                     String       @db.VarChar(100)
  code                      String       @unique @db.VarChar(20)
  description               String?
  department_id             Int?
  level                     String?      @db.VarChar(50)
  employment_type           String?      @db.VarChar(50)
  min_salary                Float?
  max_salary                Float?
  required_skills           String?
  required_experience_years Int?
  education_requirements    String?
  is_active                 Boolean?
  created_at                DateTime?    @db.Timestamp(6)
  updated_at                DateTime?    @db.Timestamp(6)
  departments               departments? @relation(fields: [department_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users                     users[]
}

model leave_applications {
  id                                                  Int         @id @default(autoincrement())
  user_id                                             Int
  leave_type_id                                       Int
  start_date                                          DateTime    @db.Date
  end_date                                            DateTime    @db.Date
  reason                                              String?
  status                                              String      @db.VarChar(20)
  is_hourly                                           Boolean?
  hours_requested                                     Float?
  manager_approved_id                                 Int?
  manager_comments                                    String?
  created_at                                          DateTime?   @db.Timestamp(6)
  updated_at                                          DateTime?   @db.Timestamp(6)
  approved_at                                         DateTime?   @db.Timestamp(6)
  leave_types                                         leave_types @relation(fields: [leave_type_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users_leave_applications_manager_approved_idTousers users?      @relation("leave_applications_manager_approved_idTousers", fields: [manager_approved_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users_leave_applications_user_idTousers             users       @relation("leave_applications_user_idTousers", fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([approved_at], map: "idx_leave_applications_approved_at")
  @@index([created_at], map: "idx_leave_applications_created_at")
  @@index([start_date, end_date], map: "idx_leave_applications_date_range")
  @@index([end_date], map: "idx_leave_applications_end_date")
  @@index([manager_approved_id], map: "idx_leave_applications_manager")
  @@index([manager_approved_id, start_date], map: "idx_leave_applications_manager_date")
  @@index([user_id, start_date, end_date], map: "idx_leave_applications_overlap_check")
  @@index([status, created_at], map: "idx_leave_applications_pending_approval")
  @@index([start_date(sort: Desc)], map: "idx_leave_applications_start_date_desc")
  @@index([status], map: "idx_leave_applications_status")
  @@index([leave_type_id], map: "idx_leave_applications_type")
  @@index([leave_type_id, start_date], map: "idx_leave_applications_type_date")
  @@index([user_id, start_date], map: "idx_leave_applications_user_date")
  @@index([user_id, status], map: "idx_leave_applications_user_status")
  @@index([user_id, leave_type_id, status], map: "idx_leave_applications_user_type_status")
}

model leave_balances {
  id                Int         @id @default(autoincrement())
  user_id           Int
  leave_type_id     Int
  balance           Float
  accrued_this_year Float?
  used_this_year    Float?
  last_accrual_date DateTime?   @db.Date
  year              Int
  created_at        DateTime?   @db.Timestamp(6)
  updated_at        DateTime?   @db.Timestamp(6)
  leave_types       leave_types @relation(fields: [leave_type_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users             users       @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([user_id, leave_type_id, year], map: "uq_user_leave_type_year")
  @@index([leave_type_id], map: "idx_leave_balances_type")
  @@index([leave_type_id, year], map: "idx_leave_balances_type_year")
  @@index([user_id], map: "idx_leave_balances_user")
  @@index([user_id, leave_type_id, year], map: "idx_leave_balances_user_type_year")
  @@index([user_id, year], map: "idx_leave_balances_user_year")
  @@index([year], map: "idx_leave_balances_year")
}

model leave_types {
  id                   Int                  @id @default(autoincrement())
  name                 String               @unique(map: "ix_leave_types_name") @db.VarChar(64)
  default_accrual_rate Float?
  description          String?              @db.VarChar(255)
  is_active            Boolean?
  requires_approval    Boolean?
  max_consecutive_days Int?
  created_at           DateTime?            @db.Timestamp(6)
  leave_applications   leave_applications[]
  leave_balances       leave_balances[]
}

model notification_preferences {
  id                 Int                @id @default(autoincrement())
  user_id            Int
  type_id            Int
  web_enabled        Boolean?
  email_enabled      Boolean?
  sms_enabled        Boolean?
  immediate          Boolean?
  daily_digest       Boolean?
  weekly_digest      Boolean?
  created_at         DateTime?          @db.Timestamp(6)
  updated_at         DateTime?          @db.Timestamp(6)
  notification_types notification_types @relation(fields: [type_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users              users              @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model notification_types {
  id                       Int                        @id @default(autoincrement())
  name                     String                     @unique @db.VarChar(50)
  display_name             String                     @db.VarChar(100)
  description              String?
  icon                     String?                    @db.VarChar(50)
  color                    String?                    @db.VarChar(20)
  is_active                Boolean?
  priority                 String?                    @db.VarChar(10)
  auto_clear_hours         Int?
  created_at               DateTime?                  @db.Timestamp(6)
  notification_preferences notification_preferences[]
  notifications            notifications[]
}

model notifications {
  id                  Int                @id @default(autoincrement())
  user_id             Int
  type_id             Int
  title               String             @db.VarChar(200)
  message             String
  action_url          String?            @db.VarChar(500)
  action_text         String?            @db.VarChar(50)
  is_read             Boolean?
  read_at             DateTime?          @db.Timestamp(6)
  priority            String?            @db.VarChar(10)
  category            String?            @db.VarChar(50)
  related_entity_type String?            @db.VarChar(50)
  related_entity_id   Int?
  created_at          DateTime?          @db.Timestamp(6)
  expires_at          DateTime?          @db.Timestamp(6)
  notification_types  notification_types @relation(fields: [type_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users               users              @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model pay_calculations {
  id                                             Int          @id @default(autoincrement())
  user_id                                        Int
  time_entry_id                                  Int
  pay_period_start                               DateTime     @db.Date
  pay_period_end                                 DateTime     @db.Date
  pay_components                                 String
  total_hours                                    Float?
  regular_hours                                  Float?
  overtime_hours                                 Float?
  double_time_hours                              Float?
  total_allowances                               Float?
  calculated_at                                  DateTime?    @db.Timestamp(6)
  calculated_by_id                               Int
  users_pay_calculations_calculated_by_idTousers users        @relation("pay_calculations_calculated_by_idTousers", fields: [calculated_by_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  time_entries                                   time_entries @relation(fields: [time_entry_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users_pay_calculations_user_idTousers          users        @relation("pay_calculations_user_idTousers", fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([calculated_at], map: "idx_pay_calculations_calculated_at")
  @@index([time_entry_id], map: "idx_pay_calculations_time_entry")
  @@index([user_id, pay_period_start, pay_period_end], map: "idx_pay_calculations_user_period")
}

model pay_codes {
  id                                                       Int            @id @default(autoincrement())
  code                                                     String         @unique(map: "ix_pay_codes_code") @db.VarChar(32)
  description                                              String         @db.VarChar(255)
  is_absence_code                                          Boolean
  is_active                                                Boolean
  created_at                                               DateTime?      @db.Timestamp(6)
  updated_at                                               DateTime?      @db.Timestamp(6)
  created_by_id                                            Int
  configuration                                            String?
  users                                                    users          @relation(fields: [created_by_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  time_entries_time_entries_absence_pay_code_idTopay_codes time_entries[] @relation("time_entries_absence_pay_code_idTopay_codes")
  time_entries_time_entries_pay_code_idTopay_codes         time_entries[] @relation("time_entries_pay_code_idTopay_codes")

  @@index([is_absence_code], map: "idx_pay_codes_absence")
  @@index([is_active], map: "idx_pay_codes_active")
  @@index([created_by_id], map: "idx_pay_codes_created_by")
}

model pay_rules {
  id            Int       @id @default(autoincrement())
  name          String    @unique(map: "ix_pay_rules_name") @db.VarChar(128)
  description   String?
  conditions    String
  actions       String
  priority      Int
  is_active     Boolean
  created_at    DateTime? @db.Timestamp(6)
  updated_at    DateTime? @db.Timestamp(6)
  created_by_id Int
  users         users     @relation(fields: [created_by_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([is_active], map: "idx_pay_rules_active")
  @@index([created_by_id], map: "idx_pay_rules_created_by")
  @@index([priority], map: "idx_pay_rules_priority")
}

model posts {
  id         Int       @id @default(autoincrement())
  title      String    @db.VarChar(200)
  content    String?
  created_at DateTime? @db.Timestamp(6)
  updated_at DateTime? @db.Timestamp(6)
  published  Boolean?
  user_id    Int
  users      users     @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([created_at], map: "idx_posts_created_at")
  @@index([user_id, published], map: "idx_posts_user_published")
}

model pulse_survey_responses {
  id            Int           @id @default(autoincrement())
  survey_id     Int
  user_id       Int
  responses     String
  submitted_at  DateTime?     @db.Timestamp(6)
  pulse_surveys pulse_surveys @relation(fields: [survey_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users         users         @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([survey_id, user_id], map: "uq_survey_user_response")
  @@index([submitted_at], map: "idx_pulse_responses_submitted")
  @@index([survey_id], map: "idx_pulse_responses_survey")
  @@index([user_id], map: "idx_pulse_responses_user")
}

model pulse_surveys {
  id                     Int                      @id @default(autoincrement())
  title                  String                   @db.VarChar(200)
  description            String?
  created_by_id          Int
  created_at             DateTime?                @db.Timestamp(6)
  ends_at                DateTime                 @db.Timestamp(6)
  is_active              Boolean?
  is_anonymous           Boolean?
  target_department      String?                  @db.VarChar(64)
  pulse_survey_responses pulse_survey_responses[]
  users                  users                    @relation(fields: [created_by_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([is_active], map: "idx_pulse_surveys_active")
  @@index([created_at], map: "idx_pulse_surveys_created_at")
  @@index([created_by_id, created_at], map: "idx_pulse_surveys_creator_date")
  @@index([target_department], map: "idx_pulse_surveys_department")
}

model regions {
  id             Int       @id @default(autoincrement())
  company_id     Int
  name           String    @db.VarChar(100)
  code           String    @db.VarChar(10)
  description    String?
  manager_name   String?   @db.VarChar(100)
  email          String?   @db.VarChar(120)
  phone          String?   @db.VarChar(20)
  address_line1  String?   @db.VarChar(100)
  address_line2  String?   @db.VarChar(100)
  city           String?   @db.VarChar(50)
  state_province String?   @db.VarChar(50)
  postal_code    String?   @db.VarChar(20)
  timezone       String?   @db.VarChar(50)
  is_active      Boolean?
  created_at     DateTime? @db.Timestamp(6)
  updated_at     DateTime? @db.Timestamp(6)
  companies      companies @relation(fields: [company_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  sites          sites[]

  @@unique([company_id, code], map: "uq_company_region_code")
}

model roles {
  id          Int          @id @default(autoincrement())
  name        String       @unique(map: "ix_roles_name") @db.VarChar(64)
  description String?      @db.VarChar(255)
  created_at  DateTime?    @db.Timestamp(6)
  user_roles  user_roles[]
}

model schedules {
  id                                            Int          @id @default(autoincrement())
  user_id                                       Int
  shift_type_id                                 Int?
  start_time                                    DateTime     @db.Timestamp(6)
  end_time                                      DateTime     @db.Timestamp(6)
  assigned_by_manager_id                        Int
  notes                                         String?
  pay_rule_link_id                              Int?
  status                                        String       @db.VarChar(20)
  created_at                                    DateTime?    @db.Timestamp(6)
  updated_at                                    DateTime?    @db.Timestamp(6)
  batch_id                                      String?      @db.VarChar(50)
  users_schedules_assigned_by_manager_idTousers users        @relation("schedules_assigned_by_manager_idTousers", fields: [assigned_by_manager_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  shift_types                                   shift_types? @relation(fields: [shift_type_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users_schedules_user_idTousers                users        @relation("schedules_user_idTousers", fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([created_at], map: "idx_schedules_created_at")
  @@index([start_time, end_time], map: "idx_schedules_date_range")
  @@index([end_time], map: "idx_schedules_end_time")
  @@index([assigned_by_manager_id], map: "idx_schedules_manager")
  @@index([assigned_by_manager_id, start_time], map: "idx_schedules_manager_date")
  @@index([user_id, start_time, end_time], map: "idx_schedules_overlap_check")
  @@index([shift_type_id, start_time], map: "idx_schedules_shift_date")
  @@index([shift_type_id], map: "idx_schedules_shift_type")
  @@index([start_time(sort: Desc)], map: "idx_schedules_start_time_desc")
  @@index([status], map: "idx_schedules_status")
  @@index([user_id, start_time], map: "idx_schedules_user_date")
  @@index([user_id, start_time, status], map: "idx_schedules_user_date_status")
  @@index([user_id, status], map: "idx_schedules_user_status")
}

model shift_types {
  id                 Int         @id @default(autoincrement())
  name               String      @unique(map: "ix_shift_types_name") @db.VarChar(64)
  default_start_time DateTime    @db.Time(6)
  default_end_time   DateTime    @db.Time(6)
  description        String?     @db.VarChar(255)
  is_active          Boolean?
  created_at         DateTime?   @db.Timestamp(6)
  schedules          schedules[]
}

model sites {
  id                    Int           @id @default(autoincrement())
  region_id             Int
  name                  String        @db.VarChar(100)
  code                  String        @db.VarChar(10)
  site_type             String?       @db.VarChar(50)
  description           String?
  manager_name          String?       @db.VarChar(100)
  email                 String?       @db.VarChar(120)
  phone                 String?       @db.VarChar(20)
  address_line1         String        @db.VarChar(100)
  address_line2         String?       @db.VarChar(100)
  city                  String        @db.VarChar(50)
  state_province        String?       @db.VarChar(50)
  postal_code           String?       @db.VarChar(20)
  latitude              Float?
  longitude             Float?
  geo_fence_radius      Int?
  operating_hours_start DateTime?     @db.Time(6)
  operating_hours_end   DateTime?     @db.Time(6)
  timezone              String?       @db.VarChar(50)
  allow_remote_work     Boolean?
  is_active             Boolean?
  created_at            DateTime?     @db.Timestamp(6)
  updated_at            DateTime?     @db.Timestamp(6)
  departments           departments[]
  regions               regions       @relation(fields: [region_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([region_id, code], map: "uq_region_site_code")
}

model tenant_settings {
  id                         Int       @id @default(autoincrement())
  tenant_id                  Int
  company_logo_url           String?   @db.VarChar(255)
  primary_color              String?   @db.VarChar(7)
  secondary_color            String?   @db.VarChar(7)
  enable_geolocation         Boolean?
  enable_overtime_alerts     Boolean?
  enable_leave_workflow      Boolean?
  enable_payroll_integration Boolean?
  enable_ai_scheduling       Boolean?
  default_pay_frequency      String?   @db.VarChar(20)
  overtime_threshold         Int?
  weekend_overtime_rate      Float?
  holiday_overtime_rate      Float?
  default_annual_leave_days  Int?
  default_sick_leave_days    Int?
  leave_approval_required    Boolean?
  email_notifications        Boolean?
  sms_notifications          Boolean?
  created_at                 DateTime? @db.Timestamp(6)
  updated_at                 DateTime? @db.Timestamp(6)
  tenants                    tenants   @relation(fields: [tenant_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model tenants {
  id                Int               @id @default(autoincrement())
  name              String            @db.VarChar(100)
  subdomain         String            @unique @db.VarChar(50)
  domain            String?           @db.VarChar(100)
  timezone          String?           @db.VarChar(50)
  currency          String?           @db.VarChar(3)
  date_format       String?           @db.VarChar(20)
  time_format       String?           @db.VarChar(20)
  subscription_plan String?           @db.VarChar(50)
  max_users         Int?
  is_active         Boolean?
  admin_email       String            @db.VarChar(120)
  phone             String?           @db.VarChar(20)
  address           String?
  created_at        DateTime?         @db.Timestamp(6)
  updated_at        DateTime?         @db.Timestamp(6)
  tenant_settings   tenant_settings[]
}

model time_entries {
  id                                                    Int                @id @default(autoincrement())
  user_id                                               Int
  clock_in_time                                         DateTime           @db.Timestamp(6)
  clock_out_time                                        DateTime?          @db.Timestamp(6)
  status                                                String             @db.VarChar(20)
  notes                                                 String?
  approved_by_manager_id                                Int?
  is_overtime_approved                                  Boolean?
  created_at                                            DateTime?          @db.Timestamp(6)
  updated_at                                            DateTime?          @db.Timestamp(6)
  clock_in_latitude                                     Float?
  clock_in_longitude                                    Float?
  clock_out_latitude                                    Float?
  clock_out_longitude                                   Float?
  break_start_time                                      DateTime?          @db.Timestamp(6)
  break_end_time                                        DateTime?          @db.Timestamp(6)
  total_break_minutes                                   Int?
  absence_pay_code_id                                   Int?
  absence_reason                                        String?
  absence_approved_by_id                                Int?
  absence_approved_at                                   DateTime?          @db.Timestamp(6)
  pay_code_id                                           Int?
  pay_calculations                                      pay_calculations[]
  users_time_entries_absence_approved_by_idTousers      users?             @relation("time_entries_absence_approved_by_idTousers", fields: [absence_approved_by_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  pay_codes_time_entries_absence_pay_code_idTopay_codes pay_codes?         @relation("time_entries_absence_pay_code_idTopay_codes", fields: [absence_pay_code_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users_time_entries_approved_by_manager_idTousers      users?             @relation("time_entries_approved_by_manager_idTousers", fields: [approved_by_manager_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  pay_codes_time_entries_pay_code_idTopay_codes         pay_codes?         @relation("time_entries_pay_code_idTopay_codes", fields: [pay_code_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users_time_entries_user_idTousers                     users              @relation("time_entries_user_idTousers", fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([absence_pay_code_id], map: "idx_time_entries_absence_code")
  @@index([approved_by_manager_id], map: "idx_time_entries_approval")
  @@index([clock_in_time(sort: Desc)], map: "idx_time_entries_clock_in_desc")
  @@index([clock_out_time], map: "idx_time_entries_clock_out")
  @@index([created_at], map: "idx_time_entries_created_at")
  @@index([clock_in_time, status], map: "idx_time_entries_date_status")
  @@index([clock_in_latitude, clock_in_longitude], map: "idx_time_entries_location")
  @@index([approved_by_manager_id, clock_in_time], map: "idx_time_entries_manager_date")
  @@index([pay_code_id], map: "idx_time_entries_pay_code")
  @@index([status], map: "idx_time_entries_status")
  @@index([user_id, clock_in_time], map: "idx_time_entries_user_date")
  @@index([user_id, clock_in_time, status], map: "idx_time_entries_user_date_status")
  @@index([user_id, status], map: "idx_time_entries_user_status")
}

model user_roles {
  user_id Int
  role_id Int
  roles   roles @relation(fields: [role_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users   users @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@id([user_id, role_id])
}

model users {
  id                                                               Int                        @id @default(autoincrement())
  username                                                         String                     @unique(map: "ix_users_username") @db.VarChar(64)
  email                                                            String                     @unique(map: "ix_users_email") @db.VarChar(120)
  password_hash                                                    String?                    @db.VarChar(256)
  first_name                                                       String?                    @db.VarChar(64)
  last_name                                                        String?                    @db.VarChar(64)
  created_at                                                       DateTime?                  @db.Timestamp(6)
  last_login                                                       DateTime?                  @db.Timestamp(6)
  is_active                                                        Boolean?
  employee_id                                                      String?                    @unique @db.VarChar(20)
  department                                                       String?                    @db.VarChar(64)
  position                                                         String?                    @db.VarChar(64)
  hire_date                                                        DateTime?                  @db.Date
  tenant_id                                                        Int?
  department_id                                                    Int?
  employment_type                                                  String?                    @default("full_time") @db.VarChar(20)
  employment_status                                                String?                    @default("active") @db.VarChar(20)
  line_manager_id                                                  Int?
  phone_number                                                     String?                    @db.VarChar(20)
  mobile_number                                                    String?                    @db.VarChar(20)
  emergency_contact_name                                           String?                    @db.VarChar(100)
  emergency_contact_phone                                          String?                    @db.VarChar(20)
  address_line1                                                    String?                    @db.VarChar(100)
  address_line2                                                    String?                    @db.VarChar(100)
  city                                                             String?                    @db.VarChar(50)
  postal_code                                                      String?                    @db.VarChar(20)
  job_title                                                        String?                    @db.VarChar(100)
  job_grade                                                        String?                    @db.VarChar(10)
  salary                                                           Float?
  hourly_rate                                                      Float?
  emergency_contact_relationship                                   String?                    @db.VarChar(50)
  education_level                                                  String?                    @db.VarChar(50)
  skills                                                           String?
  notes                                                            String?
  pay_code                                                         String?                    @db.VarChar(20)
  job_id                                                           Int?
  dashboard_configs                                                dashboard_configs[]
  departments_departments_deputy_manager_idTousers                 departments[]              @relation("departments_deputy_manager_idTousers")
  departments_departments_manager_idTousers                        departments[]              @relation("departments_manager_idTousers")
  leave_applications_leave_applications_manager_approved_idTousers leave_applications[]       @relation("leave_applications_manager_approved_idTousers")
  leave_applications_leave_applications_user_idTousers             leave_applications[]       @relation("leave_applications_user_idTousers")
  leave_balances                                                   leave_balances[]
  notification_preferences                                         notification_preferences[]
  notifications                                                    notifications[]
  pay_calculations_pay_calculations_calculated_by_idTousers        pay_calculations[]         @relation("pay_calculations_calculated_by_idTousers")
  pay_calculations_pay_calculations_user_idTousers                 pay_calculations[]         @relation("pay_calculations_user_idTousers")
  pay_codes                                                        pay_codes[]
  pay_rules                                                        pay_rules[]
  posts                                                            posts[]
  pulse_survey_responses                                           pulse_survey_responses[]
  pulse_surveys                                                    pulse_surveys[]
  schedules_schedules_assigned_by_manager_idTousers                schedules[]                @relation("schedules_assigned_by_manager_idTousers")
  schedules_schedules_user_idTousers                               schedules[]                @relation("schedules_user_idTousers")
  time_entries_time_entries_absence_approved_by_idTousers          time_entries[]             @relation("time_entries_absence_approved_by_idTousers")
  time_entries_time_entries_approved_by_manager_idTousers          time_entries[]             @relation("time_entries_approved_by_manager_idTousers")
  time_entries_time_entries_user_idTousers                         time_entries[]             @relation("time_entries_user_idTousers")
  user_roles                                                       user_roles[]
  departments_users_department_idTodepartments                     departments?               @relation("users_department_idTodepartments", fields: [department_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_users_department_id")
  users                                                            users?                     @relation("usersTousers", fields: [line_manager_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_users_line_manager_id")
  other_users                                                      users[]                    @relation("usersTousers")
  jobs                                                             jobs?                      @relation(fields: [job_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  workflow_configs                                                 workflow_configs[]
  workflow_executions                                              workflow_executions[]

  @@index([created_at], map: "idx_users_created_at")
  @@index([department], map: "idx_users_department")
  @@index([department, is_active], map: "idx_users_dept_active")
  @@index([employee_id], map: "idx_users_employee_id")
  @@index([first_name], map: "idx_users_first_name")
  @@index([first_name, last_name], map: "idx_users_full_name")
  @@index([hire_date], map: "idx_users_hire_date")
  @@index([hire_date(sort: Desc)], map: "idx_users_hire_date_desc")
  @@index([is_active], map: "idx_users_is_active")
  @@index([last_login], map: "idx_users_last_login")
  @@index([last_name], map: "idx_users_last_name")
}

model workflow_configs {
  id          Int       @id @default(autoincrement())
  config_name String    @db.VarChar(100)
  config_data String
  user_id     Int
  is_active   Boolean?
  created_at  DateTime? @db.Timestamp(6)
  updated_at  DateTime? @db.Timestamp(6)
  users       users     @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model workflow_executions {
  id                   Int       @id @default(autoincrement())
  workflow_name        String    @db.VarChar(50)
  workflow_type        String    @db.VarChar(30)
  started_at           DateTime? @db.Timestamp(6)
  completed_at         DateTime? @db.Timestamp(6)
  status               String?   @db.VarChar(20)
  records_processed    Int?
  records_successful   Int?
  records_failed       Int?
  triggered_by_user_id Int?
  execution_mode       String?   @db.VarChar(20)
  execution_log        String?
  error_message        String?
  users                users?    @relation(fields: [triggered_by_user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([started_at], map: "idx_workflow_executions_started")
  @@index([status], map: "idx_workflow_executions_status")
  @@index([workflow_type], map: "idx_workflow_executions_type")
}
